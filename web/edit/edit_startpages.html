<tal:block metal:define-macro="edit_startpages">

<div id="deleteconfirm" i18n:translate="edit_startpages_deleteconfirm" style="display:none">TEXT</div>

<div >

  <p><b i18n:translate="edit_startpages_header">TEXT</b> <small i18n:translate="edit_startpages_explain_table">TEXT</small></p>

    <form id="00" tal:attributes="action python:'edit_content?id='+str(id)+'&tab=tab_editor'" 
          tal:define="files python:node.getFiles()" method="post" enctype="multipart/form-data" name="startpages_add">
            <input i18n:attributes="value edit_startpages_addnew" type="submit" name="add_page"/>
    </form>   

    <form id="01" tal:attributes="action python:'edit_content?id='+str(id)+'&tab='+tab" 
          tal:define="files python:node.getFiles()" method="post" enctype="multipart/form-data" name="startpages"
          style="border-color: silver; border-style: solid; border-width: 1px; width: 900px">
          
        <style type="text/css">
        
        .td00,.th00{
               border-color: silver;
	             border-width: 0 1px 1px 0;
	             border-style: solid; 
	             /*padding: 0 4px 0 4px;*/
             }     
             
        .td01,.th01{
               border-color: silver;
	             border-width: 0 1px 1px 0;
	             border-style: solid; 
               /*padding: 0 4px 0 4px;*/ 
             }
                              
        </style>
        
        
        <table id="filetable" style="border-color: silver; border-style: solid; border-width: 1px 0 0 1px;" rules="all" cellspacing="0">
        
        <tr>
        
          <tal:block tal:repeat="lang languages">
            <th style="text-align:center" class="th00" tal:content="python: lang">language</th> 
          </tal:block>
        
            <td class="td01" i18n:translate="edit_startpages_link">TEXT</td> 
             <td class="td01" i18n:translate="edit_startpages_technical_name">TEXT</td> 
                <td class="td01" i18n:translate="edit_startpages_file_size">TEXT</td>
                 <td class="td01" i18n:translate="edit_startpages_ed">TEXT</td> 
                  <td class="td01" i18n:translate="edit_startpages_delete">TEXT</td> 
                   <td class="td01" i18n:translate="edit_startpages_descriptive_name">TEXT</td>
          
        </tr>
        
        <tal:block tal:repeat="item named_filelist">
          <tr tal:attributes="id python:item[0];">
          
          <tal:block tal:repeat="lang languages">
            <td class="td00">
              <input type="radio" name="radio" style="border:1px solid white" i18n:attributes="title edit_startpages_selectlanguage" tal:attributes="name python:'radio_'+lang; value python:item[0]; checked python:{'False':None,'True':'checked'}[str( lang in item[7] ) ]"/>
            </td> 
          </tal:block> 
             
            <td class="td01">  
              <a target="_blank" tal:attributes="href python:item[8]" tal:content="python:item[8]">LINK</a>
            </td>
            <td class="td01">  
              <span tal:content="python:item[0]"/>
            </td>
            <td style="text-align:right" class="td01">
              <span tal:content="python:item[5]"/>
            </td>                       
            
            <td class="td01">
              <div style="text-align:center;"> 
                <a tal:attributes="href python:'edit_content?id='+id+'&tab=tab_editor&file_to_edit='+item[0]"
                   i18n:attributes="title edit_startpages_edit">
                   <img src="/img/edit_opt.png" style="height:14px;"/>
                </a> 
              </div>   
            </td>
            
                <script type="text/javascript">
                
                function delete_startpage(obj1, s, file_shortpath){
                    var mssg = document.getElementById("deleteconfirm").innerHTML;
                    var erg = confirm(unescape(mssg));
                    if (erg == true) {
                        var win1=window.open(s+'&delete_page=True', '', 'width=1,height=1');
                        win1.close();
                    
                        var el = document.getElementById("filetable");
                        var index = obj1.parentNode.parentNode.parentNode.rowIndex;
                        el.deleteRow(index);
                        
                        return 1;
                    } else {
                        return 0;
                    };
                }
                        
                </script> 
            
            <td class="td01">
              <div width="75px" style="text-align:center; valign:middle;">  
                 <img i18n:attributes="title edit_startpages_delete" tal:attributes="name python:'delete_'+item[0]; onclick python:'return delete_startpage(this, \'edit_content?id='+id+'&tab=tab_editor&file_path='+item[3].retrieveFile()+'\',\''+item[0]+'\')'; " src="/img/delete.png" style="height:14px;cursor:hand;"/>
              </div> 
            </td>     
            
            <td class="td01">  
              <input type="text" tal:attributes="name python: 'descr.'+item[0]; value python:item[1]" style="width: 300px;"/>
            </td>  
            
          </tr>    
        </tal:block>
        
        <tr>
          
          <tal:block tal:repeat="lang languages">
            <td class="td00">
              <input type="radio" name="radio" style="border:1px solid white" i18n:attributes="title edit_startpages_selectlanguage" tal:attributes="name python:'radio_'+lang; value python:''; checked python:{'False':None,'True':'checked'}[str(getStartpageFileNode(node, lang)==None)]"/>
            </td> 
          </tal:block>
          
            <td style="text-align:left" class="td01" i18n:translate="edit_startpages_none"> - none - </td> 
              <td style="text-align:left" class="td01" i18n:translate="edit_startpages_none"> - none - </td> 
               <td style="text-align:right" class="td01" i18n:translate="edit_startpages_not_applicable"> n/a </td>
                  <td class="td01"> &nbsp; </td>
                    <td class="td01"> &nbsp; </td> 
                      <td class="td01" i18n:translate="edit_startpages_do_not_use_a_startpage"> do not use a startpage </td>
          
        </tr>        
        </table>
        
        <div> &nbsp; </div> 
        
            <input i18n:attributes="value edit_startpages_savechanges" type="submit" name="startpages_save"/>
            <input i18n:attributes="value edit_startpages_reset" type="reset" name="startpages_reset"/>

    </form> 
    
    <form id="02" tal:attributes="action python:'edit_content?id='+str(id)+'&tab=tab_editor'" 
          tal:define="files python:node.getFiles()" method="post" enctype="multipart/form-data" name="startpages_add">
       
            <input i18n:attributes="value edit_startpages_addnew" type="submit" name="add_page"/>
            
    </form>  
    
</div>      

</tal:block>



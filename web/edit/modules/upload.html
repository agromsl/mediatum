
<tal:block metal:define-macro="upload_form">
    <script type="text/javascript">
        function changeStep1(id, value){
            document.getElementById('step2').innerHTML = '<img src="/img/wait.gif" style="margin-left:50px"/>';
            document.getElementById('step3').innerHTML = '';
            getEditPage('step2', id, 'upload', 'step2|'+value);
        }
        
        function changeStep2(id, value){
            document.getElementById('step3').innerHTML = '<img src="/img/wait.gif" style="margin-left:50px"/>';
            getEditPage('step3', id, 'upload', 'step3|'+value);
        }
        
    </script>
    <p tal:condition="error" tal:content="error" i18n:translate="" class="error" style="text-align:center"/>

    <script tal:content="python:'parent.tree.updateNodeLabel('+id+')'"> </script>
    <form tal:condition="python:len(schemes)!=0" tal:attributes="action python:'/edit/edit_content?id='+id" method="post" enctype="multipart/form-data" style="border:1px solid silver">
    <div id="step1">
        <tal:block metal:use-macro="web/edit/modules/upload.html/step1"/>
    </div>
    <div id="step2"> </div>
    <div id="step3"> </div>
    </form>

</tal:block>

<tal:block metal:define-macro="step1">
    <h3 i18n:translate="edit_upload_obj_selection">TEXT</h3> 
    <p tal:condition="python:len(datatypes)>0" style="padding-left: 30px"><label i18n:translate="edit_upload_obj_sel">TEXT</label>
        <select name="objtype" tal:attributes="onchange python:'changeStep1(\''+id+'\', this.value)'">
            <option i18n:translate="edit_upload_typeselection">TEXT</option>
            <option tal:repeat="datatype datatypes" tal:attributes="value python:datatype.getName()" tal:content="python:datatype.getLongName()" i18n:translate=""/>
        </select>
    </p>
    <p tal:condition="python:len(datatypes)==0" style="padding-left:30px; color:red" i18n:translate="edit_upload_msg1"/>
</tal:block>

<tal:block metal:define-macro="step2">
    <tal:block tal:condition="python:len(schemes)>0">
        <h3><tal:block i18n:translate="edit_upload_header2"/> '<tal:block i18n:translate="" tal:content="python:objtype.getLongName()"/>'
            <a href="#" onclick="openSearchPopup('edit_content?tab=upload&type=help&id=1&objtype=image', 'help', 350, 400)">
                <img src="/img/tooltip.png" border="0"/>
            </a>
        </h3>
        <p style="padding-left: 30px"><label i18n:translate="edit_upload_scheme">TEXT</label>
            <select name="scheme" tal:attributes="onchange python:'changeStep2(\''+id+'\', this.value)'">
                <option i18n:translate="edit_upload_schemeselection">TEXT</option>
                <option tal:repeat="scheme schemes" tal:attributes="value python:scheme.getName()" tal:content="python:scheme.getLongName()" i18n:translate=""/>
            </select>
        </p>
    </tal:block>
    <p tal:condition="python:len(schemes)==0" style="padding-left:30px; color:red" i18n:translate="edit_upload_msg1"/>
</tal:block>

<tal:block metal:define-macro="step3">
    <h3 i18n:translate="edit_upload_header3">TEXT</h3>
    <p style="padding-left: 30px">
        <label i18n:translate="edit_upload_file">TEXT</label>
        <input type="file" name="file" style="width:400px"/>
    </p>
    <h3 i18n:translate="edit_upload_header4">TEXT</h3>
    <p style="padding-left: 30px">
        <input i18n:attributes="value edit_upload_upload_label" type="submit" name="submit"/>
    </p>
</tal:block>

<metal:block metal:define-macro="list">
</metal:block>

<center metal:define-macro="workflowlist">
    <h2><tal:block i18n:translate="wf_edit_header">TEXT</tal:block>:</h2>
    <table id="workflowtable" cellspacing="0px">
        <tr>
            <th i18n:translate="wf_edit_name">TEXT</th>
            <th i18n:translate="wf_edit_description">TEXT</th>
        </tr>
        <tr tal:repeat="w list">
            <td>
                <a tal:content="python:w.getName()" tal:attributes="href python:'/publish/'+w.getName()" i18n:attributes="title wf_show_details_title"/>
            </td>
            <td tal:content="raw python:w.getDescription() or '&nbsp;'"/>
        </tr>
    </table>
</center>

<center metal:define-macro="object_list">
    <h2><span i18n:translate="wf_list_header"><span tal:content="python:str(len(workflow.getNodeList()))" i18n:name="number"/> TEXT
        </span><a tal:attributes="href python:workflow.getLink()"><span tal:replace="python:workflow.getName()"/></a>': 
        <span tal:replace="python:workflow.getDescription()"/>
    </h2>
    <table id="workflowtable" cellspacing="0px">
        <tal:block tal:repeat="step python:workflow.getSteps()">
        <tr tal:attributes="bgcolor python:step.get('adminstep') and '#bec2d3' or None">
            <td align="left"><b tal:content="python:step.getName()"></b></td>
            <td align="left"><a tal:attributes="href python:step.getLink()" i18n:translate="wf_list_objects"><span tal:content="python:str(len(step.getChildren()))" i18n:name="number"/> TEXT</a></td>
        </tr>
        </tal:block>
    </table>
</center>

<center metal:define-macro="workflow_step">
    <h2 i18n:translate="wf_step_ready">TEXT</h2>
    <p i18n:translate="wf_step_msg1">
        TEXT
        <br><span tal:content="python:node.id +' '+node.name" i18n:name="name"/> 
        TEXT 
        <span tal:replace="link" i18n:name="link"/>.
    </p>

    <p i18n:translate="workflow_msg5">TEXT</p>

    <p i18n:translate="workflow_msg6">TEXT <span i18n:name="email" tal:replace="email"/></p>
</center>

<tal:block metal:define-macro="workflow_node">
    <p>
        <b i18n:translate="wf_node_msg1">TEXT <span tal:content="python:node.id+' '+node.name" i18n:name="name"/></b>
    </p>
    <p i18n:translate="wf_node_msg2">TEXT<span tal:content="name" i18n:name="name"/></p>
</tal:block>


<tal:block metal:define-macro="workflow_show">
    <h2 i18n:translate="workflow_msg3">TEXT <span tal:content="python:step.name" i18n:name="name"/>:</h2>
    <table id="workflowtable" cellspacing="0px">
        <tr>
            <th i18n:translate="workflow_label_id">TEXT</th>
            <th i18n:translate="workflow_label_date">TEXT</th>
            <th i18n:translate="workflow_label_name">TEXT</th>
            <th i18n:translate="workflow_label_step">TEXT</th>
            <th i18n:translate="workflow_label_editor">TEXT</th>
            <th colspan="2" i18n:translate="workflow_label_forward">TEXT</th>
        </tr>
        <tr tal:repeat="node python:step.getChildren().sort('name')">
            <tal:block tal:define="cssclass python:list(step.getChildren().sort('name')).index(node)%2 and 'norm' or 'silver'">
                <td tal:attributes="class cssclass" tal:content="python:node.id"/>
                <td tal:attributes="class cssclass" tal:content="python:format_date(parse_date(node.get('creationtime')),'dd.mm.yyyy HH:MM:SS')"/>
                <td tal:attributes="class cssclass" tal:content="python:node.getName()"/>

                <td tal:attributes="class cssclass"><a tal:attributes="href python:nodelink+node.id" i18n:translate="workflow_show_step">TEXT</a></td>
                <td tal:attributes="class cssclass"><a target="editorwindow" tal:attributes="href python:'/edit/edit?id='+node.id" i18n:translate="sub_header_edit">TEXT</a></td>

                <td tal:attributes="class cssclass"><a tal:attributes="href python:nodelink+node.id+'&forcefalse=1'" tal:content="raw python:step.getFalseLabel() or '&nbsp;'"/></td>
                <td tal:attributes="class cssclass"><a tal:attributes="href python:nodelink+node.id+'&forcetrue=1'" tal:content="raw python:step.getTrueLabel() or '&nbsp;'"/></td>
            </tal:block>
        </tr>
        <tr>
            <th colspan="7" align="right">
                <small i18n:translate="workflow_footer">
                    <small tal:content="python:str(len(list(step.getChildren())))" i18n:name="number"/>
                    TEXT
                </small>
            </th>
        </tr>
    </table>
    <br>
</tal:block>


<tal:block metal:define-macro="workflow_forward">
    <h2 i18n:translate="wf_step_ready">TEXT</h2>
    <p i18n:translate="workflow_msg4">
        TEXT <span tal:content="python:node.id" i18n:name="name"/> 
    </p>
</tal:block>


<tal:block metal:define-macro="workflow_forward2">
    <h2 i18n:translate="wf_step_ready">TEXT</h2>

    <p i18n:translate="wf_step_msg1">TEXT<tal:block i18n:name="name"/></p>
    
    <p i18n:translate="workflow_msg5">TEXT</p>

    <p i18n:translate="workflow_msg6">TEXT <span tal:content="email" i18n:name="email"/></p>

</tal:block>


<metal:block metal:define-macro="view">
    <p><a i18n:translate="admin_overview" href=".">zur &Uuml;bersicht</a></p>
    <form name="useroverview" method="post" action="#" tal:attributes="action page">
        <table class="overview">
            <tr>
                <td colspan="8"><h3 i18n:translate="admin_user_existing">Vorhandene Benutzer</h3></td>
            </tr>
            <tr>
                <th>&nbsp;</th>
                <th tal:repeat="col sortcol">
                    <a tal:attributes="href python:col.link; title python:col.title" tal:content="structure python:col.label"/>
                </th>
                <th>
                    <tal:block metal:use-macro="web/admin/frame.html/optionheader"/>
                </th>
                <th align="right">&nbsp;</th>
                <th align="right">
                    <input i18n:attributes="title admin_user_create" type="image" src="/img/install.png" name="new" title="Neuen Benutzer anlegen"/>
                </th>
            </tr>
            <tr tal:condition="python:len(users)==0">
                <td colspan="8"><small i18n:translate="admin_user_nousers">- keine Benutzer vorhanden -</small></td>
            </tr>
            <tal:block tal:define="start python:pages.getStart();end python:pages.getEnd()" tal:repeat="user python:users[start:end]">
                <tr tal:define="cssclass python:users.index(user)%2 and 'norm' or 'silver'">
                    <td tal:attributes="class cssclass" tal:content="python:str(users.index(user)+1)+'.'"/>
                                            <td tal:attributes="class cssclass" tal:content="python:user.getName()"/>
                    <td tal:attributes="class cssclass" tal:content="python:user.getEmail()"/>
                    <td tal:attributes="class cssclass">
                        <tal:block tal:repeat="group python:user.getGroups()">
                            <span tal:content="group"/><span tal:condition="python:user.getGroups().index(group)<len(user.getGroups())-1">, </span>
                        </tal:block>
                    </td>
                    <td tal:condition="python:user.stdPassword()" tal:attributes="class cssclass">
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img i18n:attributes="title admin_user_stdpwd_title" src="/img/unarchive.png" title="Standardpasswort" />
                    </td>
                    <td tal:condition="python:not user.stdPassword()" tal:attributes="class cssclass">
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img i18n:attributes="title admin_user_nostdpwd_title" src="/img/archive.png" title="Passwort ge&auml;ndert" />
                    </td>
                    <td tal:attributes="class cssclass">
                        <table>
                            <tr tal:define="options python:list(user.getOptionList())">
                                <td tal:repeat="option options" width="20px" align="center">
                                    <img tal:condition="python:user.getOptionList()[option]" src="/img/haken.gif"/>
                                    <img tal:condition="python: not user.getOptionList()[option]" src="/img/mark_empty.png"/>
                                </td>
                            </tr>
                        </table>
                    </td>
                    <td tal:attributes="class cssclass">
                        <input tal:attributes="name python:str('sendmail_'+user.getName())" i18n:attributes="title admin_user_sendmail_title" type="image" src="/img/email.png" title="Benutzer eine Mail schicken"/>
                    </td>
                    <td tal:attributes="class cssclass" class="_norm_">
                        <input tal:attributes="name python:str('edit_'+user.getName())" i18n:attributes="title admin_user_edit_title" type="image" src="/img/edit.png" title="Benutzer bearbeiten"/>&nbsp;&nbsp;
                        <input tal:attributes="name python:str('delete_'+user.getName()); onclick python:'return questionDelName(\''+user.getName()+'\')'" i18n:attributes="title admin_user_delete_title" type="image" src="/img/delete.png" title="Benutzer l&ouml;schen"/>
                    </td>
                </tr>
            </tal:block>
            <tr>
                <th colspan="5"><small>
                    <span i18n:translate="admin_user_footer">
                        <span i18n:name="number" tal:content="python:str(len(users))"/>
                    </span>
                    <span tal:content="structure python:pages.printPageList()"/></small>
                </th>
                <th colspan="5" align="right"><small tal:content="raw python:pages.printPageAll()"/></th>
            </tr>
        </table>
        <br>
    </form>
</metal:block>


<metal:block metal:define-macro="modify">
    <p><a i18n:translate="admin_overview" href="./user">zur &Uuml;bersicht</a></p>
    <form tal:attributes="action page" name="edituser" method="post">
        <table>
            <tr>
                <td colspan="2">
                    <h3 tal:condition="python:id==''" i18n:translate="admin_user_new_label">Neuen Benutzer anlegen</h3>
                    <h3 tal:condition="python:id!=''" i18n:translate="admin_user_edit_label">Benutzer bearbeiten</h3>
                </td>
            </tr>
            <tr tal:condition="python:error>0">
                <td colspan="2">
                    <p tal:condition="python:error==1" i18n:translate="admin_mandatory_error" class="error">Nicht alle Pflichtfelder wurden ausgef&uuml;llt.</p>
                    <p tal:condition="python:error==2" i18n:translate="admin_duplicate_error" class="error">Ein Objekt mit gleichem Namen ist bereits vorhanden.</p>
                </td>
            </tr>
            <tr>
                <td><tal:block i18n:translate="admin_user_username">Benutzername</tal:block>: <span class="required">*</span></td>
                <td tal:condition="python:id!=''">
                    <input tal:attributes="value python:user.getName()" type="hidden" name="username" maxlength="50" size="50"/>
                    <input tal:attributes="value python:user.getName()" type="text" name="username_new" maxlength="50" size="50"/>
                </td>
                <td tal:condition="python:id==''">
                    <input tal:attributes="value python:user.getName()" type="text" name="username" maxlength="50" size="50"/>
                </td>
            </tr>
            <tr>
                <td><tal:block i18n:translate="admin_user_email">Email</tal:block>: <span class="required">*</span></td>
                <td>
                    <input tal:attributes="value python:user.getEmail()" type="text" name="email" maxlength=50 size="50"/>
                </td>
            </tr>
            <tr>
                <td><tal:block i18n:translate="admin_user_groups">Benutzergruppe(n)</tal:block>: <span class="required">*</span></td>
                <td>
                    <select name="usergroups" multiple="multiple">
                        <tal:block tal:repeat="group groups">
                            <option tal:condition="python:group.getName() in ugroups or user.inGroup(group.getName())" tal:content="python:group.getName()" selected="selected"/>
                            <option tal:condition="python:not (group.getName() in ugroups) and not ( user.inGroup(group.getName()))" tal:content="python:group.getName()"/>
                        </tal:block>
                    </select>
                <td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td>
                    <input tal:attributes="name python:'reset_'+user.getName()" i18n:attributes="title admin_user_pwdchange_title" type="image" src="/img/reset_pwd.png" title="Passwort zur&uuml;cksetzen" />
                    <tal:block i18n:translate="admin_new_pwd">Neues Passwort</tal:block>: <input type="password" name="change_passwd" /><br>
                    <small>(<span i18n:translate="admin_user_msg1">bei leerem Feld wird automatisch das Standardpasswort verwendet</span>)</small>
                </td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td>
                    <fieldset>
                        <legend i18n:translate="admin_user_options">Optionen</legend>
                        <tal:block tal:define="options useroption" tal:repeat="option options">
                            <input tal:condition="python:user.getOptionList()[option.getName()]"
                                tal:attributes="name python:'option_'+option.getValue(); value python:'option_'+option.getValue()" type="checkbox" name="" value="" checked="checked">
                                                
                            <input tal:condition="python:not user.getOptionList()[option.getName()]" 
                                tal:attributes="name python:'option_'+option.getValue(); value python:'option_'+option.getValue()" type="checkbox" name="" value="">

                            <span tal:content="structure python:option.getName()" i18n:translate=""/>
                            <br>
                        </tal:block>
                    </fieldset>
                </td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td><small>(<span class="required">*</span> <span i18n:translate="admin_mandatory_info">Pflichtfeld, darf nicht leer sein</span>)</small></td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td>
                    <button i18n:attributes="title admin_save_title" i18n:translate="admin_save" type="submit" name="submit" value="submit" title="&Auml;nderungen speichern">Speichern</button>&nbsp;&nbsp;
                    <button i18n:attributes="title admin_cancel_title" i18n:translate="admin_cancel" type="submit" name="cancel" value="cancel" title="Zur&uuml;ck zur &Uuml;bersicht" onclick="setCancel()">Abbrechen</button>
                </td>
            </tr>
        </table>
        <input tal:attributes="value python:id=='' and 'save_new' or 'save_edit'" type="hidden" name="form_op" id="form_op"/>
    </form>
</metal:block>

<metal:block metal:define-macro="sendmaildone" tal:define="id python:user.getName()">
    <p>Mail wurde verschickt.</p>
    <p><a tal:attributes="href python:'./user'+page" i18n:translate="admin_overview">zur &Uuml;bersicht</a></p>
</metal:block>

<metal:block metal:define-macro="sendmail">
    <p><a tal:attributes="href python:'./user'+page" i18n:translate="admin_overview">zur &Uuml;bersicht</a></p>
    <form tal:attributes="action page" name="mailuser" method="post">
        <input type="hidden" name="sendmail_execute" value=".">
        <input type="hidden" name="userid" tal:attributes="value userid">
        <table>       
            <tr>
                <td colspan="2">
                    <h3 i18n:translate="admin_user_sendmail_title">Benutzer eine Mail schicken</h3>
                </td>
            </tr>
            <tr>
                <td><tal:block i18n:translate="admin_user_sender">Absender</tal:block>: <span class="required">*</span></td>
                <td><input type="text" name="from" value="mediatum2@ub.tum.de" maxlength=50 size="50" /></td>
            </tr>
            <tr>
                <td><tal:block i18n:translate="admin_user_email">Email</tal:block>: <span class="required">*</span></td>
                <td><input tal:attributes="value email" type="text" name="email" maxlength=50 size="50" /></td>
            </tr>
            <tr>
                <td><tal:block i18n:translate="admin_user_subject">Subject</tal:block>: <span class="required">*</span></td>
                <td><input type="text" name="subject" value="mediaTUM Account" maxlength=50 size="50" /></td>
            </tr>
            <tr>
                <td><tal:block i18n:translate="admin_user_text">Text</tal:block>: <span class="required">*</span></td>
                <td><textarea name="text" tal:content="raw mailtext" cols="100" rows="30"/></td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td><small>(<span class="required">*</span> <span i18n:translate="admin_mandatory_info">Pflichtfeld, darf nicht leer sein</span>)</small></td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td>
                    <p class="important" i18n:translate="admin_user_msg2">Hinweis: Bei Anklicken des "Senden" Knopfes wird das Passwort des Users auf das Standardpasswort zur&uuml;ckgesetzt.</p>
                    <p>&nbsp;</p>
                </td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td>
                    <button i18n:translate="admin_user_send" i18n:attributes="title admin_user_sendmail_title" type="submit" name="submit" value="submit" title="Email absenden" >Senden</button>&nbsp;&nbsp;
                    <button i18n:attributes="title admin_cancel_title" i18n:translate="admin_cancel" type="submit" name="cancel" value="cancel" title="Zur&uuml;ck zur &Uuml;bersicht" onclick="setCancel()">Abbrechen</button>
                </td>
            </tr>
        </table>
        <input type="hidden" name="form_op" id="form_op" value=""/>
    </form>
</metal:block>

<metal:block metal:define-macro="emailtext">
<tal:block tal:condition="python:language=='de'">
Sehr geehrte(r) Frau/Herr <tal:block tal:replace="name"/>,

f&uuml;r Sie ist auf dem mediaTUM Server nun eine Kennung eingerichtet.
Ihre Zugangsdaten lauten:

URL: http://<tal:block tal:replace="host"/>/
Benutzerkennung: <tal:block tal:replace="login"/>
Passwort: [wird eingesetzt]

Bitte beachten Sie, dass es sich hierbei um ein Initialpasswort handelt,
das Sie bitte nach den ersten Login ab&auml;ndern sollten.

Mit diesem Account sind Sie Mitglied in folgenden Benutzergruppen:
    <tal:block tal:repeat="group groups" tal:replace="python:'- '+group"/>

Sie haben damit Zugriff auf die folgende(n) Kollektion(en):
    <tal:block tal:repeat="collection collections" tal:replace="python:'- '+collection"/>

<tal:block tal:condition="isEditor">
Zus&auml;tzlich haben Sie Zugriff auf ein privates Arbeitsverzeichnis, in dem
Sie tempor&auml;re Dateien/Bilder sowie Verzeichnisstrukturen ab- bzw.
anlegen k&ouml;nnen.
</tal:block>

F&uuml;r Fragen/Anmerkungen stehen wir Ihnen jederzeit gerne zur Verf&uuml;gung.

Mit freundlichen Gr&uuml;&szlig;en,

das mediaTUM Team
</tal:block>
<tal:block tal:condition="python:language=='en'">
translation to be done
</tal:block>
</metal:block>
<metal:block metal:define-macro="view">
    <p><a i18n:translate="admin_overview" href=".">TEXT</a></p>
    <form name="usergroupoverview" method="post" action="#" tal:attributes="action page">
        <table class="overview">
            <tr>
                <td colspan="5"><h3 i18n:translate="admin_usergroup_existing">TEXT</h3></td>
            </tr>
            <tr>
                <th>&nbsp;</th>
                <th tal:repeat="col sortcol">
                    <a tal:attributes="href python:col.link; title python:col.title" tal:content="structure python:col.label"/>
                </th>
                <th>
                    <tal:block metal:use-macro="web/admin/frame.html/optionheader"/>
                </th>

                <th align="right">
                    <input i18n:attributes="title admin_usergroup_create" type="image" src="/img/install.png" name="new"/>
                </th>
            </tr>
            <tr tal:condition="python:len(groups)==0">
                <td colspan="6"><small i18n:translate="admin_usergroup_nogroups">TEXT</small></td>
            </tr>
            
            <tal:block tal:define="start python:pages.getStart(); end python:pages.getEnd()" tal:repeat="group python:groups[start:end]">
                <tr tal:define="cssclass python:groups.index(group)%2 and 'norm' or 'silver'">
                    <td tal:attributes="class cssclass" tal:content="python:str(groups.index(group)+1)+'.'"/>
                    <td tal:attributes="class cssclass" tal:content="python:group.getName()"/>
                    <td tal:attributes="class cssclass;title python:group.getUserNames()" style="cursor:hand;width:50px" tal:content="structure python:'&nbsp;&nbsp;&nbsp;&nbsp;'+str(len(group.getChildren()))"/>
                    <td tal:attributes="class cssclass; title python:', '.join(group.getSchemas())" style="cursor:hand;text-align:right;width:50px" tal:content="python:str(len(group.getSchemas()))"></td>
                    <td tal:attributes="class cssclass">
                        <table>
                            <tr>
                                <tal:block tal:define="options python:list(group.getOptionList())" tal:repeat="option options">
                                    <td tal:condition="python:group.getOptionList()[option]" width="20px" align="center"><img src="/img/haken.gif"/></td>
                                    <td tal:condition="python: not group.getOptionList()[option]" width="20px" align="center">
                                        <img src="/img/mark_empty.png"/>
                                    </td>
                                </tal:block>
                            </tr>
                        </table>
                    </td>
                    <td tal:attributes="class cssclass" style="width: 80px">
                        <input i18n:attributes="title admin_usergroup_edit" tal:attributes="name python:str('edit_'+group.getName())" type="image" src="/img/edit.png"/>&nbsp;&nbsp;
                        <input tal:condition="python:len(group.getChildren())==0" tal:attributes="name python:str('delete_'+group.getName()); onclick python:'return questionDelName(\''+group.getName()+'\')'" i18n:attributes="title admin_usergroup_delete" type="image" src="/img/delete.png"/>
                    </td>
                </tr>
            </tal:block>
            <tr>
                <th colspan="3">
                    <small>
                        <span i18n:translate="admin_usergroup_footer">
                            <span i18n:name="number" tal:content="python:str(len(groups))"/>
                        </span>
                        <span tal:content="raw python:pages.printPageList()"/>
                    </small>
                </th>
                <th colspan="3" align="right"><small tal:content="structure python:pages.printPageAll()"/></th>
            </tr>
        </table>
        <p>
            <small>(<span i18n:translate="admin_usergroup_msg1">TEXT</span>)</small>
        </p>
    </form>
</metal:block>

<metal:block metal:define-macro="modify" tal:define="id python:group.getName()">
    <p><a i18n:translate="admin_overview" href="./usergroup">TEXT</a></p>
    <form tal:attributes="action page" name="editgroup" method="post">
        <table>
            <tr>
                <td colspan="2">
                    <h3 tal:condition="python:id==''" i18n:translate="admin_usergroup_new_label">TEXT</h3>
                    <h3 tal:condition="python:id!=''" i18n:translate="admin_usergroup_edit_label">TEXT</h3>
                </td>
            </tr>
            <tr tal:condition="python:error>0">
                <td colspan="2">
                    <p tal:condition="python:error==1" i18n:translate="admin_mandatory_error" class="error">TEXT</p>
                    <p tal:condition="python:error==2" i18n:translate="admin_duplicate_error" class="error">TEXT</p>
                </td>
            </tr>
            <tr>
                <td><tal:block i18n:translate="admin_usergroup_group">TEXT</tal:block>: <span class="required">*</span></td>
                <td tal:condition="python:not group.getName()==''">
                    <input tal:attributes="value python:group.getName()" type="hidden" name="groupname" maxlength="50" size="50"/>
                    <span tal:content="python:group.getName()"/>
                </td>

                <td tal:condition="python:group.getName()==''">
                    <input tal:attributes="value python:group.getName()" type="text" name="groupname" value="" maxlength="50" size="50"/>
                </td>
            </tr>
            <tr>
                <td><tal:block i18n:translate="admin_usergroup_description">TEXT</tal:block>:</td>
                <td>
                    <textarea tal:content="python:group.getDescription()" name="description" rows="4" ols="35"/>
                <td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td>
                    <fieldset>
                        <legend i18n:translate="admin_usergroup_options">TEXT</legend>
                        <tal:block tal:define="options groupoption" tal:repeat="option options">
                            <input tal:condition="python:group.getOptionList()[option.getName()]"
                                tal:attributes="name python:'option_'+option.getValue(); value python:'option_'+option.getValue()" type="checkbox" checked="checked"/>
                                            
                            <input tal:condition="python:not group.getOptionList()[option.getName()]" 
                                tal:attributes="name python:'option_'+option.getValue(); value python:'option_'+option.getValue()" type="checkbox"/>

                            <span tal:content="python:option.getName()" i18n:translate=""/>
                            <br>
                        </tal:block>
                    </fieldset>
                </td>
            </tr>
            <tal:block tal:condition="python:group.getName()==''">
                <tr>
                    <td colspan="2">&nbsp;</td>
                </tr>
                <tr>
                    <td>&nbsp;</td>
                    <td>
                        <input type="checkbox" name="create_rule" value="True" checked="checked"/>
                        <span i18n:translate="admin_usergroup_aclrule">TEXT</span>
                    </td>
                </tr>
            </tal:block>
            <tr>
                <td>&nbsp;</td>
                <td><small>(<span class="required">*</span> <span i18n:translate="admin_mandatory_info">TEXT</span>)</small></td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td>
                    <button i18n:attributes="title admin_save_title" i18n:translate="admin_save" type="submit" name="submit" value="submit">TEXT</button>&nbsp;&nbsp;
                    <button i18n:attributes="title admin_cancel_title" i18n:translate="admin_cancel" type="submit" name="cancel" value="cancel" onclick="setCancel()">TEXT</button>
                </td>
            </tr>
        </table>
        <input tal:attributes="value python:id=='' and 'save_new' or 'save_edit'" type="hidden" name="form_op" id="form_op"/>
    </form>
</metal:block>

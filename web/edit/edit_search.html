
<tal:block metal:define-macro="start_new_search">
    <hr/>
    <a tal:attributes="href python:'?id='+id+'&tab=tab_search'" i18n:translate="edit_search_start">Neu Suchen starten</a>
    <hr/>
</tal:block>

<p metal:define-macro="write_message" i18n:translate="" tal:content="raw message"/>


<tal:block metal:define-macro="search_form">
    <form name="searchform">
        <input type="hidden" name="tab" value="tab_search">
        <input tal:attributes="value python:node.id" type="hidden" name="id">

        <table>
            <tr>
                <td colspan="2">
                    <b i18n:translate="edit_search_search_for">Suche nach/in:</b>
                </td>
            </tr>
            <tr>
                <td class="search" style="font-size:12px" i18n:translate="edit_search_type">Typ:</td>
                <td>
                    <select onChange="document.searchform.search.value='reload';document.searchform.submit()" name="objtype" style="width:640px">
                        <tal:block tal:repeat="mtype mtypelist">
                            <option tal:attributes="value python:mtype.getName(); selected python:{'False':None,'True':'selected'}[str(mtype.getName()==objtype)]" tal:content="python:mtype.getDescription()"/>
                        </tal:block>
                    </select>
                </td>
            <tr>
                <td colspan="2">
                    <b i18n:translate="edit_search_fields">Suchfelder:</b>
                </td>
            </tr>
            <tr>
                <td class="search" style="font-size:12px" i18n:translate="edit_search_all_fields">Alle Metadaten:</td>
                <td>
                    <input tal:attributes="value searchvalues" type="text" style="width: 640px" name="full" id="full">
                </td>
            </tr>
            <tr tal:repeat="formitem python:formlist">
                <td class="search" style="font-size:12px" tal:content="python:formitem[0].getLabel()+':'"/>
                <td tal:content="raw python:formitem[0].getSearchHTML(formitem[1],640,formitem[0].getName())"/>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td align="center">
                    <input name="search" value="run" type="hidden">
                    <input i18n:attributes="value edit_search_search" type="submit" name="Suchen" value="Suchen">&nbsp;&nbsp;&nbsp;
                    <input i18n:attributes="value edit_search_reset" type="submit" name="Reset" value="Reset">
                </td>
            </tr>
        </table>
    </form>
    <tal:block tal:replace="raw script"/>

    <p tal:condition="python: indexdate"><span i18n:translate="edit_search_index">
        Letzte Suchindex-Aktualisierung:</span> <b tal:content="indexdate"></b>
    </p>
</tal:block>